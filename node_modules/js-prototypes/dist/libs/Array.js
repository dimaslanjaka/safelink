/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable @typescript-eslint/no-this-alias */
/* eslint-disable @typescript-eslint/triple-slash-reference */
/* eslint-disable prefer-rest-params */
/* eslint-disable no-prototype-builtins */
/// <reference path="./globals.d.ts" />
const _global = (typeof window != 'undefined' ? window : global) /* node */;
Array.prototype.each = function () {
    return this.forEach;
};
Array.prototype.shuffle = function () {
    let i = this.length, j, temp;
    if (i == 0)
        return this;
    while (--i) {
        j = Math.floor(Math.random() * (i + 1));
        temp = this[i];
        this[i] = this[j];
        this[j] = temp;
    }
    return this;
};
Array.prototype.last = function (n) {
    if (!n) {
        if (this.length === 0)
            return undefined;
        return this[this.length - 1];
    }
    else {
        let start = this.length - n;
        if (start < 0)
            start = 0;
        return this.slice(start, this.length);
    }
};
Array.prototype.trim = function () {
    return this.map((str) => {
        if (typeof str == 'string')
            return str.trim();
    });
};
Array.prototype.isEmpty = function () {
    return this.length === 0;
};
Array.prototype.range = function (start, end) {
    if (end < start) {
        return [];
    }
    return this.slice(start, end + 1);
};
Array.prototype.add = function (element) {
    this.push(element);
    return this;
};
Array.prototype.addAll = function (...otherArrays) {
    const self = this;
    otherArrays.forEach(function (array) {
        array.forEach((item) => {
            self.push(item);
        });
    });
    return self;
};
Array.prototype.random = function () {
    return this[Math.floor(Math.random() * this.length)];
};
Array.prototype.unique = function () {
    const a = this.concat();
    for (let i = 0; i < a.length; ++i) {
        for (let j = i + 1; j < a.length; ++j) {
            if (a[i] === a[j])
                a.splice(j--, 1);
        }
    }
    return a;
};
Array.prototype.uniqueStringArray = function () {
    const filter = new Map(this.map((s) => [s.toLowerCase(), s]));
    return [...filter.values()];
};
Array.prototype.uniqueObjectKey = function (key, removeNull = true) {
    if (!key)
        return this;
    const resArr = [];
    this.filter(function (item) {
        const i = resArr.findIndex((x) => x[key] == item[key]);
        if (i <= -1) {
            if (removeNull) {
                if (item[key])
                    resArr.push(item);
            }
            else {
                resArr.push(item);
            }
        }
        return null;
    });
    return resArr;
};
Array.prototype.contains = function (obj) {
    let i = this.length;
    while (i--) {
        if (this[i] === obj) {
            return true;
        }
    }
    return false;
};
Array.prototype.hasIndex = function (n) {
    return typeof this[n] != 'undefined';
};
Array.prototype.first = function (n) {
    if (!n) {
        if (this.length === 0)
            return undefined;
        return this[0];
    }
    else {
        if (this.length === 0)
            return [];
        return this.slice(0, n);
    }
};
Array.prototype.compact = function () {
    //var changes = false;
    for (let i = 0; i < this.length; i++) {
        // If element is non-existent, undefined or null, remove it.
        if (!this[i]) {
            this.splice(i, 1);
            i = i - 1;
            //changes = true;
        }
    }
    //if (!changes) return undefined;
    return this;
};
Array.prototype.deleteAt = function (index) {
    if (index < 0)
        index = this.length + index;
    // If element is non-existent, return undefined:
    if (!this.hasOwnProperty(index))
        return undefined;
    const elem = this[index];
    this.splice(index, 1);
    return elem;
};
Array.prototype.unset = function (value) {
    if (this.indexOf(value) != -1) {
        // Make sure the value exists
        this.splice(this.indexOf(value), 1);
    }
    return this;
};
Array.prototype.exists = function (n) {
    return typeof this[n] !== 'undefined';
};
if (!Array.prototype.hasOwnProperty('every')) {
    Array.prototype.every = function (fun /*, thisp */) {
        'use strict';
        const t = Object(this);
        const len = t.length >>> 0;
        let i;
        const thisp = arguments[1];
        if (this == null) {
            throw new TypeError();
        }
        if (typeof fun !== 'function') {
            throw new TypeError();
        }
        for (i = 0; i < len; i++) {
            if (i in t && !fun.call(thisp, t[i], i, t)) {
                return false;
            }
        }
        return true;
    };
}
Array.prototype.move = function (from, to) {
    const itemRemoved = this.splice(from, 1); // splice() returns the remove element as an array
    this.splice(to, 0, itemRemoved[0]); // Insert itemRemoved into the target index
    return this;
};
Array.prototype.hapusItemDariArrayLain = function (...arrayLain) {
    let thisArr = this;
    arrayLain.forEach((otherArr) => {
        thisArr = thisArr.filter(function (el) {
            return !otherArr.includes(el);
        });
    });
    return thisArr;
};
Array.prototype.removeEmpties = function () {
    const filter = this.filter(function (el) {
        const notnull = 
        // make sure element is not null
        el != null &&
            // make sure element is not undefined
            typeof el != 'undefined';
        // if element is string, make sure string length not zero
        if (typeof el == 'string') {
            return notnull && el.trim().length > 0;
        }
        return notnull;
    });
    return filter;
};
/**
 * split array to chunks
 * @param sourceArray
 * @param chunkSize
 * @see {@link https://stackoverflow.com/a/71483760/6404439}
 * @returns
 * @example
let ar1 = [
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
];
// split array by 4
console.log("Split in chunks with 4 size", splitChunks(ar1, 4)); // [[1,2,3,4], [5,6,7,8]...]
 */
function array_split_chunks(sourceArray, chunkSize) {
    if (chunkSize <= 0)
        throw 'chunkSize must be greater than 0';
    const result = [];
    for (let i = 0; i < sourceArray.length; i += chunkSize) {
        result[i / chunkSize] = sourceArray.slice(i, i + chunkSize);
    }
    return result;
}
_global.array_split_chunks = array_split_chunks;
Array.prototype.split_chunks = function (size) {
    return array_split_chunks(this, size);
};
function array_filter(array) {
    return array.filter(function (el) {
        return el != null;
    });
}
_global.array_filter = array_filter;
/**
 * pick random from array
 * @param {Array<any>} arrays
 * @param {boolean} unique Unique the arrays
 */
function array_rand(arrays, unique) {
    if (unique) {
        arrays = array_unique(arrays);
    }
    const index = Math.floor(Math.random() * arrays.length);
    return {
        index: index,
        value: arrays[index],
    };
}
_global.array_rand = array_rand;
/**
 * Array unique
 * @param {Array<any>} arrays
 */
function array_unique(arrays) {
    return arrays.filter(function (item, pos, self) {
        return self.indexOf(item) == pos;
    });
}
_global.array_unique = array_unique;
/**
 * Unset array
 * @param {Array<any>} arrayName
 * @param {String|number} key
 */
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function array_unset(arrayName, key) {
    let x;
    const tmpArray = [];
    for (x in arrayName) {
        if (x != key) {
            tmpArray[x] = arrayName[x];
        }
    }
    return tmpArray;
}
_global.array_unset = array_unset;
/**
 * PHP shuffle array equivalent
 * @param array
 * @example
 * var arr = [2, 11, 37, 42];
 * shuffle(arr);
 * console.log(arr); //return random
 */
// eslint-disable-next-line @typescript-eslint/no-unused-vars
function shuffle(array) {
    let currentIndex = array.length, temporaryValue, randomIndex;
    // While there remain elements to shuffle...
    while (0 !== currentIndex) {
        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;
        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
    }
    return array;
}
_global.shuffle = shuffle;
function arrayCompare(a1, a2) {
    if (a1.length != a2.length)
        return false;
    const length = a2.length;
    for (let i = 0; i < length; i++) {
        if (a1[i] !== a2[i])
            return false;
    }
    return true;
}
_global.arrayCompare = arrayCompare;
/**
 * in_array PHP equivalent
 * @param needle string etc
 * @param haystack
 */
function inArray(needle, haystack) {
    const length = haystack.length;
    for (let i = 0; i < length; i++) {
        if (typeof haystack[i] == 'object') {
            if (arrayCompare(haystack[i], needle))
                return true;
        }
        else {
            if (haystack[i] == needle)
                return true;
        }
    }
    return false;
}
/**
 * in_array PHP equivalent
 * @param needle string etc
 * @param haystack
 */
function in_array(needle, haystack) {
    return inArray(needle, haystack);
}
_global.in_array = in_array;
/**
 * get all keys
 * @param haystack string etc
 */
function array_keys(haystack) {
    return Object.keys(haystack);
}
/**
 * Shuffles array in place.
 * @param a items An array containing the items.
 */
function array_shuffle(a) {
    let j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}
_global.array_shuffle = array_shuffle;
/**
 * Deep merge two or more objects into the first.
 * (c) 2021 Chris Ferdinandi, MIT License, {@link https://gomakethings.com}
 * @param objects  The objects to merge together
 * @returns Merged values of defaults and options
 */
function deepAssign(...objects) {
    // Make sure there are objects to merge
    const len = objects.length;
    if (len < 1)
        return;
    if (len < 2)
        return objects[0];
    // Merge all objects into first
    for (let i = 1; i < len; i++) {
        for (const key in objects[i]) {
            if (objects[i].hasOwnProperty(key)) {
                // If it's an object, recursively merge
                // Otherwise, push to key
                if (Object.prototype.toString.call(objects[i][key]) === '[object Object]') {
                    objects[0][key] = deepAssign(objects[0][key] || {}, objects[i][key]);
                }
                else {
                    objects[0][key] = objects[i][key];
                }
            }
        }
    }
    return arguments[0];
}
_global.deepAssign = deepAssign;
/**
 * Remove item from array
 * @param arr
 * @param value
 * @returns
 */
function removeItem(arr, value) {
    const index = arr.indexOf(value);
    if (index > -1) {
        arr.splice(index, 1);
    }
    return arr;
}
_global.removeItem = removeItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJyYXkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQXJyYXkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsc0RBQXNEO0FBQ3RELHFEQUFxRDtBQUNyRCw4REFBOEQ7QUFDOUQsdUNBQXVDO0FBQ3ZDLDBDQUEwQztBQUMxQyx1Q0FBdUM7QUFDdkMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxPQUFPLE1BQU0sSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBaUIsQ0FBQztBQXNNbkYsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDckIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ3RCLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHO0lBQ3hCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQ2pCLENBQVMsRUFDVCxJQUFTLENBQUM7SUFDWixJQUFJLENBQUMsSUFBSSxDQUFDO1FBQUUsT0FBTyxJQUFJLENBQUM7SUFDeEIsT0FBTyxFQUFFLENBQUMsRUFBRTtRQUNWLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7S0FDaEI7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQztBQUVGLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztJQUNoQyxJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQ04sSUFBSSxJQUFJLENB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QU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7aUJBQ2hGO3FCQUFNO29CQUNMLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQ25DO2FBQ0Y7U0FDRjtLQUNGO0lBRUQsT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEIsQ0FBQztBQUNELE9BQU8sQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0FBRWhDOzs7OztHQUtHO0FBQ0gsU0FBUyxVQUFVLENBQUksR0FBYSxFQUFFLEtBQVE7SUFDNUMsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRTtRQUNkLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3RCO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBQ0QsT0FBTyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzICovXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvdHJpcGxlLXNsYXNoLXJlZmVyZW5jZSAqL1xuLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXJlc3QtcGFyYW1zICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90b3R5cGUtYnVpbHRpbnMgKi9cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL2dsb2JhbHMuZC50c1wiIC8+XG5jb25zdCBfZ2xvYmFsID0gKHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBnbG9iYWwpIC8qIG5vZGUgKi8gYXMgYW55O1xuXG4vKipcbiAqIEFycmF5c1xuICovXG5pbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAvKipcbiAgICogVW5pcXVlIEFycmF5XG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBkdXBsaWNhdGUgPSBbMSwyLDEsMiwzLDQsNSw2XTtcbiAgICogdmFyIHVuaXF1ZSA9IGR1cGxpY2F0ZS51bmlxdWUoKTsgLy8gWzEsMiwzLDQsNSw2XVxuICAgKi9cbiAgdW5pcXVlOiAoKSA9PiBBcnJheTxUPjtcblxuICAvKipcbiAgICogVW5pcXVlIHN0cmluZyBhcnJheSBjYXNlIGluc2Vuc2l0aXZlIGJ1dCBrZWVwIG9uZSBjYXNlIHNlbnNpdGl2ZSByZXN1bHRcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ4NzMxNDQ1LzY0MDQ0Mzl9XG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnNvbGUubG9nKFsnSmFtZXMnLCAnamFtZXMnLCAnYm9iJywgJ0phTWVTJywgJ0JvYiddLnVuaXF1ZVN0cmluZ0FycmF5KCkpOyAvLyBbXCJKYU1lU1wiLCBcIkJvYlwiXVxuICAgKi9cbiAgdW5pcXVlU3RyaW5nQXJyYXk6ICgpID0+IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIE1vdmUgaXRlbSB0byBhbm90aGVyIGluZGV4XG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS83MDYxODc5MS82NDA0NDM5fVxuICAgKi9cbiAgbW92ZTogKGZyb206IG51bWJlciwgdG86IG51bWJlcikgPT4gQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFVuaXF1ZSBhcnJheSBvZiBvYmplY3RzIGJ5IGtleVxuICAgKiBAc2VlIHtAbGluayBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTE1Mzc4ODd9XG4gICAqIEBwYXJhbSBrZXkgb2JqZWN0IGtleSB0byBjaGVja1xuICAgKiBAcGFyYW0gcmVtb3ZlTnVsbCByZW1vdmUgbnVsbCBhbmQgdW5kZWZpbmVkIChkZWZhdWx0PXRydWUpXG4gICAqL1xuICB1bmlxdWVPYmplY3RLZXk6IChrZXk6IHN0cmluZywgcmVtb3ZlTnVsbD86IGJvb2xlYW4pID0+IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgYXJyYXkgaXRlbSBmcm9tIG90aGVyIGFycmF5c1xuICAgKi9cbiAgaGFwdXNJdGVtRGFyaUFycmF5TGFpbjogKC4uLmFycmF5TGFpbjogYW55W10pID0+IGFueVtdO1xuXG4gIC8qKlxuICAgKiBQaWNrIDEgcmFuZG9tIGFycmF5IGVsZW1lbnRcbiAgICovXG4gIHJhbmRvbTogPFQ+KCkgPT4gVDtcblxuICAvKipcbiAgICogc3BsaXQgYXJyYXkgdG8gY2h1bmtzXG4gICAqIEBwYXJhbSBzaXplIGRpdmlkZWQgYXJyYXkgYnkgbnVtYmVyIGluZGV4XG4gICAqL1xuICBzcGxpdF9jaHVua3M6IChzaXplOiBudW1iZXIpID0+IFJldHVyblR5cGU8dHlwZW9mIGFycmF5X3NwbGl0X2NodW5rcz47XG5cbiAgLyoqXG4gICAqIEFkZCBFbGVtZW50XG4gICAqIEBwYXJhbSBlbGVtZW50XG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBhID0gWzEsMl07XG4gICAqIGEuYWRkKDMpO1xuICAgKiBjb25zb2xlLmxvZyhhKTsgLy8gWzEsMiwzXVxuICAgKlxuICAgKiB2YXIgYiA9IFswLDldO1xuICAgKiBjb25zb2xlLmxvZyhiLmFkZCgyKSk7IC8vIFswLDksMl1cbiAgICovXG4gIGFkZChlbGVtZW50OiBhbnkpOiBBcnJheTxUPjtcblxuICAvKipcbiAgICogQHN1bW1hcnkgQWRkIGFub3RoZXIgYXJyYXlcbiAgICogQGRlc2NyaXB0aW9uIEFkZCBhbm90aGVyIGFycmF5IHRvIGN1cnJlbnQgYXJyYXlcbiAgICogQHBhcmFtIGFub3RoZXJBcnJheVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgYSA9IFswLDFdO1xuICAgKiB2YXIgYiA9IFsnYScsJ2InXTtcbiAgICogY29uc29sZS5sb2coYi5hZGRBbGwoYSkpOyAvLyBbJ2EnLCdiJywwLDFdXG4gICAqIHZhciBjID0gWyd6JywxMF07XG4gICAqIGMuYWRkQWxsKGIpO1xuICAgKiBjb25zb2xlLmxvZyhjKTsgLy8gWyd6JywxMCwnYScsJ2InLDAsMV1cbiAgICogdmFyIGQgPSBbJ2xhc3QnXTpcbiAgICogZC5hZGRBbGwoYSxiLGMpO1xuICAgKiBjb25zb2xlLmxvZyhkKTsgLy8gWydsYXN0JywnYScsJ2InLDAsMV1cbiAgICovXG4gIGFkZEFsbCguLi5hbm90aGVyQXJyYXk6IEFycmF5PGFueT4pOiBBcnJheTxhbnk+O1xuXG4gIC8qKlxuICAgKiBHZXQgZWxlbWVudCBpbiByYW5nZSBmcm9tIGFycmF5XG4gICAqIEBwYXJhbSBzdGFydCBzdGFydCBudW1iZXIgaW5kZXhcbiAgICogQHBhcmFtIGVuZCBlbmQgbnVtYmVyIGluZGV4XG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGFyciA9IFsxLCAyLCAzLCA0LCA1XTtcbiAgICogY29uc29sZS5sb2coYXJyLnJhbmdlKDEsIDMpKTtcbiAgICovXG4gIHJhbmdlKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogQXJyYXk8YW55PjtcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHNlbGYgY29udGFpbnMgbm8gZWxlbWVudHMuXG4gICAqIEBzZWUge0BsaW5rIEFycmF5PFQ+Lmxlbmd0aH1cbiAgICovXG4gIGlzRW1wdHkoKTogYm9vbGVhbjtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCwgb3IgdGhlIGZpcnN0IG4gZWxlbWVudHMsIG9mIHRoZSBhcnJheS5cbiAgICogSWYgdGhlIGFycmF5IGlzIGVtcHR5LCByZXF1ZXN0aW5nIG9uZSBlbGVtZW50IHJldHVybnMgdW5kZWZpbmVkICxcbiAgICogYW5kIHJlcXVlc3RpbmcgbXVsdGlwbGUgZWxlbWVudHMgcmV0dXJucyBhbiBlbXB0eSBhcnJheS5cbiAgICogQGV4YW1wbGVcbiAgICogICB2YXIgYSA9IFsgXCJxXCIsIFwiclwiLCBcInNcIiwgXCJ0XCIgXVxuICAgKiAgIGEuZmlyc3QoKSAgIC8vID0+IFwicVwiXG4gICAqICAgYS5maXJzdCgyKSAgLy8gPT4gW1wicVwiLCBcInJcIl1cbiAgICovXG4gIGZpcnN0KG46IG51bWJlcik6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQocykgb2Ygc2VsZi5cbiAgICogSWYgdGhlIGFycmF5IGlzIGVtcHR5LCByZXR1cm5zIHVuZGVmaW5lZCAgaWYgb25seSBvbmUgZWxlbWVudCByZXF1ZXN0ZWQuXG4gICAqIEBleGFtcGxlXG4gICAqICAgdmFyIGEgPSBbIFwid1wiLCBcInhcIiwgXCJ5XCIsIFwielwiIF1cbiAgICogICBhLmxhc3QoKSAgICAgLy8gPT4gXCJ6XCJcbiAgICogICBhLmxhc3QoMikgICAgLy8gPT4gW1wieVwiLCBcInpcIl1cbiAgICovXG4gIGxhc3QobjogbnVtYmVyKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFVuc2V0IGVsZW1lbnQgdmFsdWUgZnJvbSBhcnJheVxuICAgKiBAcGFyYW0gbiB2YWx1ZSBlbGVtZW50XG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBhcnIgPSBbJ2EnLCdiJywnYyddO1xuICAgKiBhcnIudW5zZXQoJ2MnKTtcbiAgICogY29uc29sZS5sb2coYXJyKTsgLy8gWydhJywnYiddXG4gICAqL1xuICB1bnNldChuOiBhbnkpOiBBcnJheTxUPjtcblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgZWxlbWVudCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LCByZXR1cm5pbmcgdGhhdCBlbGVtZW50LCBvciB1bmRlZmluZWQgIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAqIEEgbmVnYXRpdmUgaW5kZXggaXMgY291bnRlZCBmcm9tIHRoZSBlbmQgb2YgdGhlIGFycmF5LCB3aGVyZSAtMSBjb3JyZXNwb25kcyB0byB0aGUgbGFzdCBlbGVtZW50LiBSZXR1cm5zIHNlbGZcbiAgICogZm9yIGNoYWluaW5nIHB1cnBvc2VzLlxuICAgKiBAZXhhbXBsZVxuICAgKiAgIHZhciBhID0gW1wiYW50XCIsIFwiYmF0XCIsIFwiY2F0XCIsIFwiZG9nXCJdXG4gICAqICAgYS5kZWxldGVBdCgyKSAgICAvLyA9PiBcImNhdFwiXG4gICAqICAgYSAgICAgICAgICAgICAgICAvLyA9PiBbXCJhbnRcIiwgXCJiYXRcIiwgXCJkb2dcIl1cbiAgICogICBhLmRlbGV0ZUF0KDk5KSAgIC8vID0+IHVuZGVmaW5lZCAoYmVjYXVzZSBpbmRleCA5OSBub3QgZm91bmQpXG4gICAqICAgaWYoYS5kZWxldGVBdCgxKSkgY29uc29sZS5sb2coJ2l0ZW0gd2l0aCBpbmRleCAxIHJlbW92ZWQnKSAvLyBjb25kaXRpb25hbFxuICAgKi9cbiAgZGVsZXRlQXQobjogbnVtYmVyKTogQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgbnVsbCAgYW5kIHVuZGVmaW5lZCAgZWxlbWVudHMgZnJvbSB0aGUgYXJyYXksIHR1cm5pbmcgaXQgaW50byBhIGRlbnNlIGFycmF5LlxuICAgKiBSZXR1cm5zIHNlbGYgZm9yIGNoYWluaW5nIHB1cnBvc2VzXG4gICAqL1xuICBjb21wYWN0KCk6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBDaGVjayBlbGVtZW50IGluZGV4IGV4aXN0c1xuICAgKiBAZXhhbXBsZVxuICAgKiBbJ2EnLCdiJ10uZXhpc3RzKDEpOyAvL3RydWVcbiAgICogWydhJywnYiddLmV4aXN0cyg0KTsgLy9mYWxzZVxuICAgKi9cbiAgZXhpc3RzKG46IG51bWJlcik6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIENoZWNrIGFycmF5IGNvbnRhaW5zIHN0cmluZy9hbnlcbiAgICogQHBhcmFtIG9ialxuICAgKiBAZXhhbXBsZVxuICAgKiBhbGVydChbMSwgMiwgM10uY29udGFpbnMoMikpOyAvLyA9PiB0cnVlXG4gICAqIGFsZXJ0KFsxLCAyLCAzXS5jb250YWlucygnMicpKTsgLy8gPT4gZmFsc2VcbiAgICovXG4gIGNvbnRhaW5zKG9iajogYW55KTogYm9vbGVhbjtcblxuICAvKipcbiAgICogQ2hlY2sgaWYgYXJyYXkgb2Zmc2V0IChpbmRleCkgZXhpc3RzXG4gICAqIEBwYXJhbSBuXG4gICAqIEBleGFtcGxlXG4gICAqIGFsZXJ0KFt7fSwnYScsJ3gnXS5oYXNJbmRleCgyKSk7IC8vID0+IHRydWUgLSBhcnJheSBoYXMgb2Zmc2V0IDIgaXMgJ3gnXG4gICAqIGFsZXJ0KFt7fSwnYScsJ3gnXS5oYXNJbmRleCgzKSk7IC8vID0+IGZhbHNlXG4gICAqL1xuICBoYXNJbmRleChuOiBudW1iZXIpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTaHVmZmxlIGFycmF5cy5cbiAgICogQGRlc2NyaXB0aW9uIFJhbmRvbWl6ZSBhcnJheSBlbGVtZW50c1xuICAgKiBAZXhhbXBsZVxuICAgKiBhbGVydChbMSwyLDMsNCw1XS5zaHVmZmxlKCkpXG4gICAqL1xuICBzaHVmZmxlKCk6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgbnVsbCwgZW1wdHkgc3RyaW5nLCBvciB1bmRlZmluZWQgdmFsdWVzXG4gICAqL1xuICByZW1vdmVFbXB0aWVzKCk6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiB0cmltIGFycmF5IG9mIHN0cmluZ3NcbiAgICovXG4gIHRyaW0oKTogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogc2FtZSBhcyBBcnJheTxhbnk+Wydmb3JFYWNoJ11cbiAgICovXG4gIGVhY2g6IEFycmF5PGFueT5bJ2ZvckVhY2gnXTsgLy9UW11bJ2ZvckVhY2gnXTtcbn1cblxuQXJyYXkucHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbiAodGhpczogQXJyYXk8YW55Pikge1xuICByZXR1cm4gdGhpcy5mb3JFYWNoO1xufTtcblxuQXJyYXkucHJvdG90eXBlLnNodWZmbGUgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBpID0gdGhpcy5sZW5ndGgsXG4gICAgajogbnVtYmVyLFxuICAgIHRlbXA6IGFueTtcbiAgaWYgKGkgPT0gMCkgcmV0dXJuIHRoaXM7XG4gIHdoaWxlICgtLWkpIHtcbiAgICBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgdGVtcCA9IHRoaXNbaV07XG4gICAgdGhpc1tpXSA9IHRoaXNbal07XG4gICAgdGhpc1tqXSA9IHRlbXA7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5BcnJheS5wcm90b3R5cGUubGFzdCA9IGZ1bmN0aW9uIChuKSB7XG4gIGlmICghbikge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0aGlzW3RoaXMubGVuZ3RoIC0gMV07XG4gIH0gZWxzZSB7XG4gICAgbGV0IHN0YXJ0ID0gdGhpcy5sZW5ndGggLSBuO1xuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMDtcblxuICAgIHJldHVybiB0aGlzLnNsaWNlKHN0YXJ0LCB0aGlzLmxlbmd0aCk7XG4gIH1cbn07XG5cbkFycmF5LnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5tYXAoKHN0cikgPT4ge1xuICAgIGlmICh0eXBlb2Ygc3RyID09ICdzdHJpbmcnKSByZXR1cm4gc3RyLnRyaW0oKTtcbiAgfSk7XG59O1xuXG5BcnJheS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMubGVuZ3RoID09PSAwO1xufTtcblxuQXJyYXkucHJvdG90eXBlLnJhbmdlID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgaWYgKGVuZCA8IHN0YXJ0KSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIHJldHVybiB0aGlzLnNsaWNlKHN0YXJ0LCBlbmQgKyAxKTtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICB0aGlzLnB1c2goZWxlbWVudCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmFkZEFsbCA9IGZ1bmN0aW9uICguLi5vdGhlckFycmF5cykge1xuICBjb25zdCBzZWxmID0gdGhpcztcbiAgb3RoZXJBcnJheXMuZm9yRWFjaChmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICBhcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBzZWxmLnB1c2goaXRlbSk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gc2VsZjtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5yYW5kb20gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubGVuZ3RoKV07XG59O1xuXG5BcnJheS5wcm90b3R5cGUudW5pcXVlID0gZnVuY3Rpb24gKHRoaXM6IEFycmF5PGFueT4pIHtcbiAgY29uc3QgYSA9IHRoaXMuY29uY2F0KCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGEubGVuZ3RoOyArK2opIHtcbiAgICAgIGlmIChhW2ldID09PSBhW2pdKSBhLnNwbGljZShqLS0sIDEpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhO1xufTtcblxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZVN0cmluZ0FycmF5ID0gZnVuY3Rpb24gKHRoaXM6IEFycmF5PHN0cmluZz4pIHtcbiAgY29uc3QgZmlsdGVyID0gbmV3IE1hcCh0aGlzLm1hcCgocykgPT4gW3MudG9Mb3dlckNhc2UoKSwgc10pKTtcbiAgcmV0dXJuIFsuLi5maWx0ZXIudmFsdWVzKCldO1xufTtcblxuQXJyYXkucHJvdG90eXBlLnVuaXF1ZU9iamVjdEtleSA9IGZ1bmN0aW9uICh0aGlzOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4sIGtleSwgcmVtb3ZlTnVsbCA9IHRydWUpIHtcbiAgaWYgKCFrZXkpIHJldHVybiB0aGlzO1xuICBjb25zdCByZXNBcnIgPSBbXTtcbiAgdGhpcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBjb25zdCBpID0gcmVzQXJyLmZpbmRJbmRleCgoeCkgPT4geFtrZXldID09IGl0ZW1ba2V5XSk7XG4gICAgaWYgKGkgPD0gLTEpIHtcbiAgICAgIGlmIChyZW1vdmVOdWxsKSB7XG4gICAgICAgIGlmIChpdGVtW2tleV0pIHJlc0Fyci5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzQXJyLnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9KTtcbiAgcmV0dXJuIHJlc0Fycjtcbn07XG5cbkFycmF5LnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgbGV0IGkgPSB0aGlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmICh0aGlzW2ldID09PSBvYmopIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5BcnJheS5wcm90b3R5cGUuaGFzSW5kZXggPSBmdW5jdGlvbiAobjogbnVtYmVyKSB7XG4gIHJldHVybiB0eXBlb2YgdGhpc1tuXSAhPSAndW5kZWZpbmVkJztcbn07XG5cbkFycmF5LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uIChuKSB7XG4gIGlmICghbikge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0aGlzWzBdO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xuXG4gICAgcmV0dXJuIHRoaXMuc2xpY2UoMCwgbik7XG4gIH1cbn07XG5cbkFycmF5LnByb3RvdHlwZS5jb21wYWN0ID0gZnVuY3Rpb24gKCkge1xuICAvL3ZhciBjaGFuZ2VzID0gZmFsc2U7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgIC8vIElmIGVsZW1lbnQgaXMgbm9uLWV4aXN0ZW50LCB1bmRlZmluZWQgb3IgbnVsbCwgcmVtb3ZlIGl0LlxuICAgIGlmICghdGhpc1tpXSkge1xuICAgICAgdGhpcy5zcGxpY2UoaSwgMSk7XG4gICAgICBpID0gaSAtIDE7XG4gICAgICAvL2NoYW5nZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuICAvL2lmICghY2hhbmdlcykgcmV0dXJuIHVuZGVmaW5lZDtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkFycmF5LnByb3RvdHlwZS5kZWxldGVBdCA9IGZ1bmN0aW9uIDxUPih0aGlzOiBUW10sIGluZGV4KTogVCB7XG4gIGlmIChpbmRleCA8IDApIGluZGV4ID0gdGhpcy5sZW5ndGggKyBpbmRleDtcblxuICAvLyBJZiBlbGVtZW50IGlzIG5vbi1leGlzdGVudCwgcmV0dXJuIHVuZGVmaW5lZDpcbiAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KGluZGV4KSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICBjb25zdCBlbGVtID0gdGhpc1tpbmRleF07XG4gIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgcmV0dXJuIGVsZW07XG59O1xuXG5BcnJheS5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaWYgKHRoaXMuaW5kZXhPZih2YWx1ZSkgIT0gLTEpIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhlIHZhbHVlIGV4aXN0c1xuICAgIHRoaXMuc3BsaWNlKHRoaXMuaW5kZXhPZih2YWx1ZSksIDEpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuQXJyYXkucHJvdG90eXBlLmV4aXN0cyA9IGZ1bmN0aW9uIChuOiBudW1iZXIpIHtcbiAgcmV0dXJuIHR5cGVvZiB0aGlzW25dICE9PSAndW5kZWZpbmVkJztcbn07XG5cbmlmICghQXJyYXkucHJvdG90eXBlLmhhc093blByb3BlcnR5KCdldmVyeScpKSB7XG4gIEFycmF5LnByb3RvdHlwZS5ldmVyeSA9IGZ1bmN0aW9uIChmdW46IGFueSAvKiwgdGhpc3AgKi8pIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgY29uc3QgdDogeyBbeDogc3RyaW5nXTogYW55OyBsZW5ndGg6IG51bWJlciB9ID0gT2JqZWN0KHRoaXMpO1xuICAgIGNvbnN0IGxlbiA9IHQubGVuZ3RoID4+PiAwO1xuICAgIGxldCBpOiBzdHJpbmcgfCBudW1iZXI7XG4gICAgY29uc3QgdGhpc3A6IGFueSA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZ1biAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGkgaW4gdCAmJiAhZnVuLmNhbGwodGhpc3AsIHRbaV0sIGksIHQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbn1cblxuQXJyYXkucHJvdG90eXBlLm1vdmUgPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcbiAgY29uc3QgaXRlbVJlbW92ZWQgPSB0aGlzLnNwbGljZShmcm9tLCAxKTsgLy8gc3BsaWNlKCkgcmV0dXJucyB0aGUgcmVtb3ZlIGVsZW1lbnQgYXMgYW4gYXJyYXlcbiAgdGhpcy5zcGxpY2UodG8sIDAsIGl0ZW1SZW1vdmVkWzBdKTsgLy8gSW5zZXJ0IGl0ZW1SZW1vdmVkIGludG8gdGhlIHRhcmdldCBpbmRleFxuICByZXR1cm4gdGhpcztcbn07XG5cbkFycmF5LnByb3RvdHlwZS5oYXB1c0l0ZW1EYXJpQXJyYXlMYWluID0gZnVuY3Rpb24gKHRoaXM6IGFueVtdLCAuLi5hcnJheUxhaW4pIHtcbiAgbGV0IHRoaXNBcnIgPSB0aGlzO1xuICBhcnJheUxhaW4uZm9yRWFjaCgob3RoZXJBcnIpID0+IHtcbiAgICB0aGlzQXJyID0gdGhpc0Fyci5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICByZXR1cm4gIW90aGVyQXJyLmluY2x1ZGVzKGVsKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXNBcnI7XG59O1xuXG5BcnJheS5wcm90b3R5cGUucmVtb3ZlRW1wdGllcyA9IGZ1bmN0aW9uICh0aGlzOiBhbnlbXSkge1xuICBjb25zdCBmaWx0ZXIgPSB0aGlzLmZpbHRlcihmdW5jdGlvbiAoZWw6IHN0cmluZyB8IGFueSkge1xuICAgIGNvbnN0IG5vdG51bGwgPVxuICAgICAgLy8gbWFrZSBzdXJlIGVsZW1lbnQgaXMgbm90IG51bGxcbiAgICAgIGVsICE9IG51bGwgJiZcbiAgICAgIC8vIG1ha2Ugc3VyZSBlbGVtZW50IGlzIG5vdCB1bmRlZmluZWRcbiAgICAgIHR5cGVvZiBlbCAhPSAndW5kZWZpbmVkJztcbiAgICAvLyBpZiBlbGVtZW50IGlzIHN0cmluZywgbWFrZSBzdXJlIHN0cmluZyBsZW5ndGggbm90IHplcm9cbiAgICBpZiAodHlwZW9mIGVsID09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gbm90bnVsbCAmJiBlbC50cmltKCkubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcmV0dXJuIG5vdG51bGw7XG4gIH0pO1xuICByZXR1cm4gZmlsdGVyO1xufTtcblxuLyoqXG4gKiBzcGxpdCBhcnJheSB0byBjaHVua3NcbiAqIEBwYXJhbSBzb3VyY2VBcnJheVxuICogQHBhcmFtIGNodW5rU2l6ZVxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzcxNDgzNzYwLzY0MDQ0Mzl9XG4gKiBAcmV0dXJuc1xuICogQGV4YW1wbGVcbmxldCBhcjEgPSBbXG4gIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMFxuXTtcbi8vIHNwbGl0IGFycmF5IGJ5IDRcbmNvbnNvbGUubG9nKFwiU3BsaXQgaW4gY2h1bmtzIHdpdGggNCBzaXplXCIsIHNwbGl0Q2h1bmtzKGFyMSwgNCkpOyAvLyBbWzEsMiwzLDRdLCBbNSw2LDcsOF0uLi5dXG4gKi9cbmZ1bmN0aW9uIGFycmF5X3NwbGl0X2NodW5rczxUIGV4dGVuZHMgYW55W10+KHNvdXJjZUFycmF5OiBULCBjaHVua1NpemU6IG51bWJlcik6IFRbXSB7XG4gIGlmIChjaHVua1NpemUgPD0gMCkgdGhyb3cgJ2NodW5rU2l6ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJztcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlQXJyYXkubGVuZ3RoOyBpICs9IGNodW5rU2l6ZSkge1xuICAgIHJlc3VsdFtpIC8gY2h1bmtTaXplXSA9IHNvdXJjZUFycmF5LnNsaWNlKGksIGkgKyBjaHVua1NpemUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5fZ2xvYmFsLmFycmF5X3NwbGl0X2NodW5rcyA9IGFycmF5X3NwbGl0X2NodW5rcztcbkFycmF5LnByb3RvdHlwZS5zcGxpdF9jaHVua3MgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYXJyYXlfc3BsaXRfY2h1bmtzKHRoaXMsIHNpemUpO1xufTtcblxuZnVuY3Rpb24gYXJyYXlfZmlsdGVyKGFycmF5OiBbXSkge1xuICByZXR1cm4gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgIHJldHVybiBlbCAhPSBudWxsO1xuICB9KTtcbn1cbl9nbG9iYWwuYXJyYXlfZmlsdGVyID0gYXJyYXlfZmlsdGVyO1xuXG4vKipcbiAqIHBpY2sgcmFuZG9tIGZyb20gYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXk8YW55Pn0gYXJyYXlzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVuaXF1ZSBVbmlxdWUgdGhlIGFycmF5c1xuICovXG5mdW5jdGlvbiBhcnJheV9yYW5kKGFycmF5czogYW55W10sIHVuaXF1ZTogYW55KSB7XG4gIGlmICh1bmlxdWUpIHtcbiAgICBhcnJheXMgPSBhcnJheV91bmlxdWUoYXJyYXlzKTtcbiAgfVxuICBjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5cy5sZW5ndGgpO1xuICByZXR1cm4ge1xuICAgIGluZGV4OiBpbmRleCxcbiAgICB2YWx1ZTogYXJyYXlzW2luZGV4XSxcbiAgfTtcbn1cbl9nbG9iYWwuYXJyYXlfcmFuZCA9IGFycmF5X3JhbmQ7XG5cbi8qKlxuICogQXJyYXkgdW5pcXVlXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IGFycmF5c1xuICovXG5mdW5jdGlvbiBhcnJheV91bmlxdWUoYXJyYXlzOiBhbnlbXSkge1xuICByZXR1cm4gYXJyYXlzLmZpbHRlcihmdW5jdGlvbiAoaXRlbTogYW55LCBwb3M6IGFueSwgc2VsZjogc3RyaW5nIHwgYW55W10pIHtcbiAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09IHBvcztcbiAgfSk7XG59XG5fZ2xvYmFsLmFycmF5X3VuaXF1ZSA9IGFycmF5X3VuaXF1ZTtcblxuLyoqXG4gKiBVbnNldCBhcnJheVxuICogQHBhcmFtIHtBcnJheTxhbnk+fSBhcnJheU5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfG51bWJlcn0ga2V5XG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbmZ1bmN0aW9uIGFycmF5X3Vuc2V0KGFycmF5TmFtZTogeyBbeDogc3RyaW5nXTogYW55IH0sIGtleTogYW55KSB7XG4gIGxldCB4OiBzdHJpbmcgfCBudW1iZXI7XG4gIGNvbnN0IHRtcEFycmF5ID0gW107XG4gIGZvciAoeCBpbiBhcnJheU5hbWUpIHtcbiAgICBpZiAoeCAhPSBrZXkpIHtcbiAgICAgIHRtcEFycmF5W3hdID0gYXJyYXlOYW1lW3hdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG1wQXJyYXk7XG59XG5fZ2xvYmFsLmFycmF5X3Vuc2V0ID0gYXJyYXlfdW5zZXQ7XG5cbi8qKlxuICogUEhQIHNodWZmbGUgYXJyYXkgZXF1aXZhbGVudFxuICogQHBhcmFtIGFycmF5XG4gKiBAZXhhbXBsZVxuICogdmFyIGFyciA9IFsyLCAxMSwgMzcsIDQyXTtcbiAqIHNodWZmbGUoYXJyKTtcbiAqIGNvbnNvbGUubG9nKGFycik7IC8vcmV0dXJuIHJhbmRvbVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG5mdW5jdGlvbiBzaHVmZmxlKGFycmF5OiBBcnJheTxhbnk+KSB7XG4gIGxldCBjdXJyZW50SW5kZXggPSBhcnJheS5sZW5ndGgsXG4gICAgdGVtcG9yYXJ5VmFsdWU6IGFueSxcbiAgICByYW5kb21JbmRleDogbnVtYmVyO1xuXG4gIC8vIFdoaWxlIHRoZXJlIHJlbWFpbiBlbGVtZW50cyB0byBzaHVmZmxlLi4uXG4gIHdoaWxlICgwICE9PSBjdXJyZW50SW5kZXgpIHtcbiAgICAvLyBQaWNrIGEgcmVtYWluaW5nIGVsZW1lbnQuLi5cbiAgICByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGN1cnJlbnRJbmRleCk7XG4gICAgY3VycmVudEluZGV4IC09IDE7XG5cbiAgICAvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG4gICAgdGVtcG9yYXJ5VmFsdWUgPSBhcnJheVtjdXJyZW50SW5kZXhdO1xuICAgIGFycmF5W2N1cnJlbnRJbmRleF0gPSBhcnJheVtyYW5kb21JbmRleF07XG4gICAgYXJyYXlbcmFuZG9tSW5kZXhdID0gdGVtcG9yYXJ5VmFsdWU7XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59XG5fZ2xvYmFsLnNodWZmbGUgPSBzaHVmZmxlO1xuXG5mdW5jdGlvbiBhcnJheUNvbXBhcmUoYTE6IEFycmF5PGFueT4sIGEyOiBBcnJheTxhbnk+KSB7XG4gIGlmIChhMS5sZW5ndGggIT0gYTIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGxlbmd0aCA9IGEyLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChhMVtpXSAhPT0gYTJbaV0pIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbl9nbG9iYWwuYXJyYXlDb21wYXJlID0gYXJyYXlDb21wYXJlO1xuXG4vKipcbiAqIGluX2FycmF5IFBIUCBlcXVpdmFsZW50XG4gKiBAcGFyYW0gbmVlZGxlIHN0cmluZyBldGNcbiAqIEBwYXJhbSBoYXlzdGFja1xuICovXG5mdW5jdGlvbiBpbkFycmF5KG5lZWRsZTogYW55LCBoYXlzdGFjazogQXJyYXk8YW55Pikge1xuICBjb25zdCBsZW5ndGggPSBoYXlzdGFjay5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodHlwZW9mIGhheXN0YWNrW2ldID09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoYXJyYXlDb21wYXJlKGhheXN0YWNrW2ldLCBuZWVkbGUpKSByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGhheXN0YWNrW2ldID09IG5lZWRsZSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBpbl9hcnJheSBQSFAgZXF1aXZhbGVudFxuICogQHBhcmFtIG5lZWRsZSBzdHJpbmcgZXRjXG4gKiBAcGFyYW0gaGF5c3RhY2tcbiAqL1xuZnVuY3Rpb24gaW5fYXJyYXkobmVlZGxlOiBhbnksIGhheXN0YWNrOiBBcnJheTxhbnk+KSB7XG4gIHJldHVybiBpbkFycmF5KG5lZWRsZSwgaGF5c3RhY2spO1xufVxuX2dsb2JhbC5pbl9hcnJheSA9IGluX2FycmF5O1xuXG4vKipcbiAqIGdldCBhbGwga2V5c1xuICogQHBhcmFtIGhheXN0YWNrIHN0cmluZyBldGNcbiAqL1xuZnVuY3Rpb24gYXJyYXlfa2V5cyhoYXlzdGFjazogYW55KSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhoYXlzdGFjayk7XG59XG5cbi8qKlxuICogU2h1ZmZsZXMgYXJyYXkgaW4gcGxhY2UuXG4gKiBAcGFyYW0gYSBpdGVtcyBBbiBhcnJheSBjb250YWluaW5nIHRoZSBpdGVtcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlfc2h1ZmZsZShhOiBBcnJheTxhbnk+KSB7XG4gIGxldCBqOiBudW1iZXIsIHg6IGFueSwgaTogbnVtYmVyO1xuICBmb3IgKGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgeCA9IGFbaV07XG4gICAgYVtpXSA9IGFbal07XG4gICAgYVtqXSA9IHg7XG4gIH1cbiAgcmV0dXJuIGE7XG59XG5fZ2xvYmFsLmFycmF5X3NodWZmbGUgPSBhcnJheV9zaHVmZmxlO1xuXG4vKipcbiAqIERlZXAgbWVyZ2UgdHdvIG9yIG1vcmUgb2JqZWN0cyBpbnRvIHRoZSBmaXJzdC5cbiAqIChjKSAyMDIxIENocmlzIEZlcmRpbmFuZGksIE1JVCBMaWNlbnNlLCB7QGxpbmsgaHR0cHM6Ly9nb21ha2V0aGluZ3MuY29tfVxuICogQHBhcmFtIG9iamVjdHMgIFRoZSBvYmplY3RzIHRvIG1lcmdlIHRvZ2V0aGVyXG4gKiBAcmV0dXJucyBNZXJnZWQgdmFsdWVzIG9mIGRlZmF1bHRzIGFuZCBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGRlZXBBc3NpZ24oLi4ub2JqZWN0czogUmVjb3JkPGFueSwgdW5rbm93bj5bXSk6IFJlY29yZDxhbnksIHVua25vd24+IHtcbiAgLy8gTWFrZSBzdXJlIHRoZXJlIGFyZSBvYmplY3RzIHRvIG1lcmdlXG4gIGNvbnN0IGxlbiA9IG9iamVjdHMubGVuZ3RoO1xuICBpZiAobGVuIDwgMSkgcmV0dXJuO1xuICBpZiAobGVuIDwgMikgcmV0dXJuIG9iamVjdHNbMF07XG5cbiAgLy8gTWVyZ2UgYWxsIG9iamVjdHMgaW50byBmaXJzdFxuICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0c1tpXSkge1xuICAgICAgaWYgKG9iamVjdHNbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAvLyBJZiBpdCdzIGFuIG9iamVjdCwgcmVjdXJzaXZlbHkgbWVyZ2VcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBwdXNoIHRvIGtleVxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdHNbaV1ba2V5XSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgb2JqZWN0c1swXVtrZXldID0gZGVlcEFzc2lnbig8YW55Pm9iamVjdHNbMF1ba2V5XSB8fCB7fSwgPGFueT5vYmplY3RzW2ldW2tleV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9iamVjdHNbMF1ba2V5XSA9IG9iamVjdHNbaV1ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcmd1bWVudHNbMF07XG59XG5fZ2xvYmFsLmRlZXBBc3NpZ24gPSBkZWVwQXNzaWduO1xuXG4vKipcbiAqIFJlbW92ZSBpdGVtIGZyb20gYXJyYXlcbiAqIEBwYXJhbSBhcnJcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlSXRlbTxUPihhcnI6IEFycmF5PFQ+LCB2YWx1ZTogVCk6IEFycmF5PFQ+IHtcbiAgY29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZih2YWx1ZSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cbl9nbG9iYWwucmVtb3ZlSXRlbSA9IHJlbW92ZUl0ZW07XG4iXX0=